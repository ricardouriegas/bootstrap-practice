<!-- index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SocialConnect | Registro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2563eb;
            --hover-color: #1d4ed8;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .btn-primary {
            background-color: var(--primary-color);
            border: none;
        }

        .btn-primary:hover {
            background-color: var(--hover-color);
        }

        .container.py-5 {
            max-width: 1200px;
        }
        
        .card {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .card-img-top {
            height: 250px;
            object-fit: cover;
        }
        
        .form-control, .form-select {
            max-width: 100%;
            height: 45px;
        }

        .required-field::after {
            content: " *";
            color: var(--primary-color);
            font-weight: bold;
        }

        .form-label {
            margin-bottom: 0.3rem;
            color: #4b5563;
        }

        .password-strength {
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .register-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 2rem;
        }

        /* Navbar styles */
        .btn-group .btn-primary {
            padding: 12px 30px;
            font-size: 1.1rem;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        .btn-group .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(37, 99, 235, 0.3);
        }

        .container.text-center.my-3 {
            margin-top: 1.5rem !important;
            margin-bottom: 2rem !important;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn-return {
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            background: transparent;
            transition: all 0.3s;
            flex: 1;
        }

        .btn-return:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .btn-register {
            flex: 2;
        }
    </style>
</head>
<body class="gradient-bg">    
    <!-- register.html -->
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="register-card">
                    <img src="https://picsum.photos/800/200" class="img-fluid rounded mb-4" alt="Register banner">
                    <h2 class="text-center mb-2">Registro de nuevo usuario</h2>
                    <p class="text-center text-muted mb-4">Los campos marcados con * son obligatorios</p>
                    
                    <form id="registerForm" novalidate>
                        <div class="mb-3">
                            <label for="username" class="form-label required-field">Username</label>
                            <input type="text" class="form-control" id="username" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="password" class="form-label required-field">Password</label>
                            <input type="password" class="form-control" id="password" required>
                            <div class="password-strength text-muted"></div>
                        </div>

                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label required-field">Confirmar Password</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="email" class="form-label required-field">Correo electrónico</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="nombre" class="form-label required-field">Nombre</label>
                            <input type="text" class="form-control" id="nombre" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="apellidos" class="form-label">Apellidos</label>
                            <input type="text" class="form-control" id="apellidos">
                        </div>
                        
                        <div class="mb-3">
                            <label for="gender" class="form-label required-field">Género</label>
                            <select class="form-select" id="gender" required>
                                <option value="">[Seleccione]</option>
                                <option value="Hombre">Hombre</option>
                                <option value="Mujer">Mujer</option>
                                <option value="NoAplica">No Aplica</option>
                                <option value="PrefieroNoDecirlo">Prefiero no Decirlo</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>
                        
                        <div class="mb-3 d-none" id="otherGenderContainer">
                            <label for="otherGender" class="form-label">Especificar género</label>
                            <input type="text" class="form-control" id="otherGender">
                        </div>
                        
                        <div class="mb-3">
                            <label for="birthdate" class="form-label required-field">Fecha de nacimiento</label>
                            <input type="date" class="form-control" id="birthdate" required>
                        </div>
                        
                        <div class="form-actions">
                            <a href="login.html" class="btn btn-return">Volver al Login</a>
                            <button type="submit" class="btn btn-primary btn-register">Registrarse</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div> <!-- Cierre del contenedor principal -->
    <!-- Navbar eliminado -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function() {
        // Validación del formulario
        $('#registerForm').submit(function(e) {
            e.preventDefault();
            clearValidationErrors();
            let isValid = true;
            let errors = [];

            const username = $('#username').val().trim();
            const password = $('#password').val();
            const confirmPassword = $('#confirmPassword').val();
            const email = $('#email').val().trim();
            const nombre = $('#nombre').val().trim();
            const gender = $('#gender').val();
            const otherGender = $('#otherGender').val().trim();
            const birthdate = $('#birthdate').val();

            // Validaciones de campos obligatorios
            if (!username) {
                errors.push("Username es obligatorio");
                showValidationError('#username', "Username es obligatorio");
                isValid = false;
            }
            if (!password) {
                errors.push("Password es obligatorio");
                showValidationError('#password', "Password es obligatorio");
                isValid = false;
            }
            if (!confirmPassword) {
                errors.push("Confirmar Password es obligatorio");
                showValidationError('#confirmPassword', "Confirmar Password es obligatorio");
                isValid = false;
            }
            if (!email) {
                errors.push("Correo electrónico es obligatorio");
                showValidationError('#email', "Correo electrónico es obligatorio");
                isValid = false;
            }
            if (!nombre) {
                errors.push("Nombre es obligatorio");
                showValidationError('#nombre', "Nombre es obligatorio");
                isValid = false;
            }
            if (!gender) {
                errors.push("Género es obligatorio");
                showValidationError('#gender', "Género es obligatorio");
                isValid = false;
            }
            if (gender === 'Otro' && !otherGender) {
                errors.push("Debe especificar el género");
                showValidationError('#otherGender', "Debe especificar el género");
                isValid = false;
            }
            if (!birthdate) {
                errors.push("Fecha de nacimiento es obligatoria");
                showValidationError('#birthdate', "Fecha de nacimiento es obligatoria");
                isValid = false;
            }

            // Validación de email mejorada
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if(email && !emailRegex.test(email)) {
                errors.push("El formato del correo electrónico no es válido");
                showValidationError('#email', "El formato del correo electrónico no es válido");
                isValid = false;
            }

            // Validar que las contraseñas coincidan
            if(password && confirmPassword && password !== confirmPassword) {
                errors.push("Las contraseñas no coinciden");
                showValidationError('#confirmPassword', "Las contraseñas no coinciden");
                isValid = false;
            }

            // Validar edad mínima de 18 años
            if(birthdate) {
                const birth = new Date(birthdate);
                const today = new Date();
                let age = today.getFullYear() - birth.getFullYear();
                const m = today.getMonth() - birth.getMonth();
                if(m < 0 || (m === 0 && today.getDate() < birth.getDate())) {
                    age--;
                }
                if(age < 18) {
                    errors.push("Debe ser mayor de 18 años para registrarse");
                    showValidationError('#birthdate', "Debe ser mayor de 18 años para registrarse");
                    isValid = false;
                }
            }

            if(errors.length > 0) {
                alert("Por favor corrija los siguientes errores:\n- " + errors.join("\n- "));
                return false;
            }

            if(isValid) {
                alert('Registro exitoso! Redirigiendo al login...');
                setTimeout(() => window.location.href = 'login.html', 1500);
            }
        });

        // Mostrar/Ocultar campo "Otro" para género
        $('#gender').change(function() {
            if($(this).val() === 'Otro') {
                $('#otherGenderContainer').removeClass('d-none');
                $('#otherGender').prop('required', true);
            } else {
                $('#otherGenderContainer').addClass('d-none');
                $('#otherGender').prop('required', false);
            }
        });

        // Password strength checker
        $('#password').on('input', function() {
            const password = $(this).val();
            let strength = 0;
            let message = '';

            if (password.length >= 8) strength++;
            if (password.match(/[A-Z]/)) strength++;
            if (password.match(/[0-9]/)) strength++;
            if (password.match(/[^A-Za-z0-9]/)) strength++;

            switch(strength) {
                case 0:
                case 1:
                    message = 'Débil';
                    color = '#dc3545';
                    break;
                case 2:
                    message = 'Regular';
                    color = '#ffc107';
                    break;
                case 3:
                    message = 'Buena';
                    color = '#0d6efd';
                    break;
                case 4:
                    message = 'Fuerte';
                    color = '#198754';
                    break;
            }

            $('.password-strength').text('Fortaleza: ' + message).css('color', color);
        });

        // Improved form validation feedback
        function showValidationError(field, message) {
            const feedback = $(`<div class="invalid-feedback">${message}</div>`);
            $(field).addClass('is-invalid').after(feedback);
        }

        function clearValidationErrors() {
            $('.is-invalid').removeClass('is-invalid');
            $('.invalid-feedback').remove();
        }
    });
</script>

</body>
</html>
